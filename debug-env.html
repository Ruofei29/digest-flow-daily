<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment Variables Debug</title>
    <style>
        body {
            font-family: monospace;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .debug-section {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #007acc;
        }
        .env-var {
            margin: 5px 0;
            padding: 5px;
            background: #f8f8f8;
            border-radius: 3px;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
    </style>
</head>
<body>
    <h1>üîç Environment Variables Debug</h1>
    
    <div class="debug-section">
        <h2>Vite Environment Variables</h2>
        <div id="vite-env"></div>
    </div>

    <div class="debug-section">
        <h2>Stripe Price IDs</h2>
        <div id="stripe-prices"></div>
    </div>

    <div class="debug-section">
        <h2>Current Plan Configurations</h2>
        <div id="plan-config"></div>
    </div>

    <script type="module">
        // Ê£ÄÊü• Vite ÁéØÂ¢ÉÂèòÈáè
        const viteEnvDiv = document.getElementById('vite-env');
        const allEnvVars = import.meta.env;
        
        console.log('üîç All environment variables:', allEnvVars);
        
        let envHtml = '<h3>All VITE_ variables:</h3>';
        Object.keys(allEnvVars).forEach(key => {
            if (key.startsWith('VITE_')) {
                const value = allEnvVars[key];
                const isSet = value && value !== 'undefined' && value !== '';
                envHtml += `<div class="env-var ${isSet ? 'success' : 'error'}">
                    <strong>${key}:</strong> ${value || '‚ùå NOT SET'}
                </div>`;
            }
        });
        viteEnvDiv.innerHTML = envHtml;

        // Ê£ÄÊü• Stripe ‰ª∑Ê†ºID
        const stripePricesDiv = document.getElementById('stripe-prices');
        const starterPriceId = import.meta.env.VITE_STRIPE_STARTER_PRICE_ID;
        const professionalPriceId = import.meta.env.VITE_STRIPE_PROFESSIONAL_PRICE_ID;
        
        stripePricesDiv.innerHTML = `
            <div class="env-var ${starterPriceId && starterPriceId !== 'price_starter_demo' ? 'success' : 'error'}">
                <strong>Starter Price ID:</strong> ${starterPriceId || '‚ùå NOT SET'}
                ${starterPriceId === 'price_starter_demo' ? '<br>‚ö†Ô∏è Still using demo price!' : ''}
            </div>
            <div class="env-var ${professionalPriceId && professionalPriceId !== 'price_professional_demo' ? 'success' : 'error'}">
                <strong>Professional Price ID:</strong> ${professionalPriceId || '‚ùå NOT SET'}
                ${professionalPriceId === 'price_professional_demo' ? '<br>‚ö†Ô∏è Still using demo price!' : ''}
            </div>
        `;

        // Ê®°Êãü STRIPE_PRICES ÂØπË±°
        const STRIPE_PRICES = {
            starter: {
                monthly: import.meta.env.VITE_STRIPE_STARTER_PRICE_ID || 'price_starter_demo',
            },
            professional: {
                monthly: import.meta.env.VITE_STRIPE_PROFESSIONAL_PRICE_ID || 'price_professional_demo',
            },
        };

        const planConfigDiv = document.getElementById('plan-config');
        planConfigDiv.innerHTML = `
            <div class="env-var">
                <strong>Starter Plan stripePriceId:</strong> ${STRIPE_PRICES.starter.monthly}
                ${STRIPE_PRICES.starter.monthly === 'price_starter_demo' ? '<br><span class="error">‚ùå Using demo price!</span>' : '<br><span class="success">‚úÖ Using real price!</span>'}
            </div>
            <div class="env-var">
                <strong>Professional Plan stripePriceId:</strong> ${STRIPE_PRICES.professional.monthly}
                ${STRIPE_PRICES.professional.monthly === 'price_professional_demo' ? '<br><span class="error">‚ùå Using demo price!</span>' : '<br><span class="success">‚úÖ Using real price!</span>'}
            </div>
        `;

        // ËæìÂá∫Âà∞ÊéßÂà∂Âè∞Áî®‰∫éË∞ÉËØï
        console.log('üéØ STRIPE_PRICES object:', STRIPE_PRICES);
        console.log('üéØ Starter price ID:', STRIPE_PRICES.starter.monthly);
        console.log('üéØ Professional price ID:', STRIPE_PRICES.professional.monthly);
    </script>
</body>
</html> 